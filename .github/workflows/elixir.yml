name: Elixir CI

on: push

jobs:
  test:

    runs-on: ubuntu-latest

    services:
      redis:
        image: redis
        ports:
        - 6379:6379

    steps:
    - uses: actions/checkout@v1
    - uses: actions/setup-elixir@v1.0.0
      with:
        otp-version: 22.1
        elixir-version: 1.9.4

    - name: Install Dependencies
      run: mix deps.get

    - name: Run Tests
      # env:
      #   REDIS_HOST: redis
      #   REDIS_PORT: ${{ job.services.redis.ports['6379'] }}
      run: mix test
